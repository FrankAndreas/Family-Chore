{
    "project_name": "Universal-GSD-Core",
    "version": "2.0",
    "agent_roles": [
        {
            "role": "Product_Owner",
            "model_tier": "High (Pro/Claude)",
            "focus": "Requirement gathering, updating docs/master-spec.md, and verifying feature alignment with user goals."
        },
        {
            "role": "Researcher",
            "model_tier": "Mid (Flash/Pro-low)",
            "focus": "Analyze open-source and closed-source docs to find prior art. Plans search strategy, asks user for confirmation before executing. User can say 'Skip research' for simple features."
        },
        {
            "role": "Architect",
            "model_tier": "High (Pro/Claude)",
            "focus": "Logic flow, API design, and PLAN.md ownership. References docs/master-spec.md for system truth."
        },
        {
            "role": "Executor",
            "model_tier": "Mid/Low (Pro-low/Flash)",
            "focus": "Standard code implementation and modular refactoring."
        },
        {
            "role": "Code_Reviewer",
            "model_tier": "High (Pro/Claude)",
            "focus": "Review uncommitted code like a PR reviewer. Uses 'git diff' to analyze changes. MUST use a different model than the Executor used."
        },
        {
            "role": "QA_Nerd",
            "model_tier": "Low (Flash)",
            "focus": "Test automation, bug hunting, and browser verification."
        },
        {
            "role": "Librarian",
            "model_tier": "Low (Flash)",
            "focus": "State tracking, context pruning, updating STATE.md, and appending session learnings to LEARNINGS.md."
        }
    ],
    "agent_behaviors": {
        "workflow_protocol": "SPEC-PLAN-EXECUTE-VERIFY",
        "spec_phase": {
            "require": "User confirmation",
            "action": "Define acceptance criteria, edge cases, and BDD scenarios before any technical planning."
        },
        "pre_flight_check": {
            "require": "PLAN.md",
            "action": "Architect must validate technical approach before Executor writes code."
        },
        "post_flight_check": {
            "require": "QA_Report",
            "action": "QA_Nerd must verify fix in integrated browser or terminal."
        },
        "context_sync": {
            "frequency": "After every 3 commits",
            "action": "Librarian summarizes recent changes into STATE.md to prevent context rot."
        }
    },
    "agent_handoff": {
        "description": "At the end of each session, suggest the next agent role based on this flow.",
        "flow": {
            "Product_Owner": {
                "next": "Researcher",
                "prompt": "As Researcher, research how others have implemented this feature.",
                "skip_option": "Say 'Skip research' for simple features to go directly to Architect."
            },
            "Researcher": {
                "next": "Architect",
                "prompt": "As Architect, plan the implementation based on the research findings."
            },
            "Architect": {
                "next": "Executor",
                "prompt": "As Executor, implement the plan."
            },
            "Executor": {
                "next": "Code_Reviewer",
                "prompt": "As Code_Reviewer, review the uncommitted changes.",
                "model_note": "Use a DIFFERENT model than the one used for Executor."
            },
            "Code_Reviewer": {
                "next": "QA_Nerd",
                "prompt": "As QA_Nerd, verify the implementation."
            },
            "QA_Nerd": {
                "next": "Librarian",
                "prompt": "As Librarian, update STATE.md and LEARNINGS.md."
            },
            "Librarian": {
                "next": "Fresh Session",
                "prompt": "Start a new conversation and ask: 'What's my next step?'"
            }
        },
        "state_field": "next_session_prompt"
    },
    "global_constraints": [
        "STRICT_NO_DELETE: Never delete blocks of code; comment them out or move to /temp/legacy.",
        "NO_BLIND_FIXES: Never suggest a fix without first identifying the root cause in the terminal logs.",
        "SPEC_FIRST: If a requirement is ambiguous, stop and ask the user before guessing.",
        "QUOTA_INTELLIGENCE: If the current task does not match the Role's recommended model_tier, I MUST suggest an upshift (for quality) or downshift (to save quota). The user may explicitly overrule this (e.g., 'Stay on Pro for now').",
        "FRESH_CONTEXT: For complex multi-step tasks, suggest chunking work into smaller units. After completing a major milestone (e.g., a full feature or 3+ file edits), remind the user: 'Consider committing and restarting the session for fresh context.' This prevents context rot and RAM buildup.",
        "DOC_SYNC: After implementing any user-facing feature, update docs/guides/user-guide.md before marking the task complete."
    ]
}